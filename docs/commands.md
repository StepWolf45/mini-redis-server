# Документация команд Mini Redis Server

## Обзор

Mini Redis Server реализует подмножество команд Redis с поддержкой TTL (Time To Live). Сервер использует упрощенный протокол на основе RESP (Redis Serialization Protocol) с поддержкой inline команд.

## Поддерживаемые команды

### SET
Устанавливает значение для ключа с опциональным TTL.

**Синтаксис:**
```
SET key value [EX seconds] [PX milliseconds]
```

**Параметры:**
- `key` - ключ (строка)
- `value` - значение (строка)
- `EX seconds` - TTL в секундах (опционально)
- `PX milliseconds` - TTL в миллисекундах (опционально)

**Примеры:**
```
SET mykey hello
SET mykey hello EX 10
SET mykey hello PX 5000
```

**Ответ:**
```
+OK
```

**Ошибки:**
```
-ERR: wrong number of arguments for 'set' command
-ERR: invalid expire time in 'set' command
```

### GET
Получает значение по ключу.

**Синтаксис:**
```
GET key
```

**Параметры:**
- `key` - ключ (строка)

**Примеры:**
```
GET mykey
```

**Ответ:**
```
$5
hello
```
Или если ключ не существует:
```
$-1
```

### TTL
Возвращает оставшееся время жизни ключа в секундах.

**Синтаксис:**
```
TTL key
```

**Параметры:**
- `key` - ключ (строка)

**Примеры:**
```
TTL mykey
```

**Ответ:**
- `целое число` - оставшиеся секунды
- `-1` - ключ существует, но TTL не установлен
- `-2` - ключ не существует

### EXPIRE
Устанавливает TTL для существующего ключа.

**Синтаксис:**
```
EXPIRE key seconds
```

**Параметры:**
- `key` - ключ (строка)
- `seconds` - TTL в секундах (целое число > 0)

**Примеры:**
```
EXPIRE mykey 30
```

**Ответ:**
```
:1
```
(1 - успех, 0 - ключ не найден)

**Ошибки:**
```
-ERR: wrong number of arguments for 'expire' command
-ERR: value is not an integer or out of range
```

### EXISTS
Проверяет существование ключей.

**Синтаксис:**
```
EXISTS key [key ...]
```

**Параметры:**
- `key` - один или несколько ключей

**Примеры:**
```
EXISTS mykey
EXISTS key1 key2 key3
```

**Ответ:**
```
:2
```
(количество существующих ключей)

### DEL
Удаляет ключи.

**Синтаксис:**
```
DEL key [key ...]
```

**Параметры:**
- `key` - один или несколько ключей для удаления

**Примеры:**
```
DEL mykey
DEL key1 key2 key3
```

**Ответ:**
```
:2
```
(количество удаленных ключей)

### KEYS
Возвращает список ключей, соответствующих паттерну.

**Синтаксис:**
```
KEYS pattern
```

**Параметры:**
- `pattern` - паттерн поиска 

**Примеры:**
```
KEYS *
```

**Ответ:**
```
*2
$4
key1
$4
key2
```
(массив строк с ключами)

## Протокол

### Форматы ответов

1. **Simple Strings** (статус, OK):
   ```
   +OK\r\n
   ```

2. **Errors** (ошибки):
   ```
   -ERR: message\r\n
   ```

3. **Integers** (числа):
   ```
   :123\r\n
   ```

4. **Bulk Strings** (строки):
   ```
   $5\r\nhello\r\n
   ```
   (длина, \r\n, данные, \r\n)

5. **Arrays** (массивы):
   ```
   *2\r\n$4\r\nkey1\r\n$4\r\nkey2\r\n
   ```
   (количество элементов, элементы)

### Inline команды

Сервер поддерживает упрощенный inline формат команд:
```
SET mykey hello EX 10
GET mykey
```

### RESP массивы

Также поддерживается полный RESP формат для массивов:
```
*3\r\n$3\r\nSET\r\n$5\r\nmykey\r\n$5\r\nhello\r\n
```

## Ограничения

- Максимальный размер команды: 10MB
- Максимальный размер массива: 1000 элементов
- Максимальный размер bulk string: 1MB
- Таймаут чтения команд: 30 секунд

